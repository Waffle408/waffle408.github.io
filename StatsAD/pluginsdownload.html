<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>STATS • Plugins</title>
  <meta name="description" content="Download verified plugins for the Short Term Asset Tracking System (STATS)." />
  <link rel="icon" href="favicon.ico" />
  <style>
    :root {
      --bg: #1d1f24;
      --panel: #262a32;
      --panel-2: #2e333d;
      --text: #e9ecf1;
      --muted: #a9b3c4;
      --brand: #007aff; /* STATS blue */
      --good: #2ecc71;
      --warn: #f1c40f;
      --bad: #e74c3c;
      --border: #3a404b;
      --shadow: 0 10px 24px rgba(0,0,0,.25);
      --radius: 16px;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(1200px 1200px at 80% -10%, rgba(0,122,255,.08), transparent 60%), var(--bg);
      color: var(--text);
    }
    a { color: var(--brand); text-decoration: none; }
    .wrap { max-width: 1200px; margin: 0 auto; padding: 28px 20px 64px; }

    /* Header */
    .topbar { display:flex; align-items:center; gap:18px; margin-bottom: 22px; }
    .logo {
      width: 40px; height: 40px; border-radius: 10px;
      background: linear-gradient(135deg, var(--brand), #49a4ff);
      display:grid; place-items:center; color:#fff; font-weight:800;
      box-shadow: var(--shadow);
    }
    .title { display:flex; flex-direction:column; }
    .title h1 { font-size: 22px; margin:0; letter-spacing:.3px; }
    .title span { font-size: 12px; color: var(--muted); margin-top: 2px; }

    /* Utility bar */
    .util { display:flex; flex-wrap: wrap; gap:12px; align-items:center; margin: 14px 0 28px; }
    .search { flex: 1 1 360px; position: relative; }
    .search input {
      width: 100%; padding: 12px 40px 12px 40px; border-radius: 999px; border:1px solid var(--border);
      background: var(--panel); color: var(--text); outline:none; box-shadow: var(--shadow);
    }
    .search svg { position:absolute; left:12px; top:50%; transform:translateY(-50%); opacity:.7 }
    .pill {
      display:inline-flex; align-items:center; gap:8px; padding: 10px 14px; border-radius: 999px;
      background: var(--panel); border:1px solid var(--border); color: var(--text);
      cursor:pointer; transition: .15s transform;
    }
    .pill.active { outline: 2px solid rgba(0,122,255,.4); background: var(--panel-2); }
    .pill:hover { transform: translateY(-1px); }

    /* Grid */
    .grid { display:grid; grid-template-columns: repeat(12, 1fr); gap:16px; }
    .col-8 { grid-column: span 8; }
    .col-4 { grid-column: span 4; }
    @media (max-width: 1000px){ .col-8, .col-4 { grid-column: 1/-1; } }

    /* Cards */
    .card { background: linear-gradient(180deg, var(--panel), var(--panel-2)); border:1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow); }
    .card .hd { display:flex; align-items:center; justify-content:space-between; padding: 16px 18px; border-bottom:1px solid var(--border); }
    .card .bd { padding: 16px 18px; }
    .badge { font-size: 11px; padding: 6px 10px; border-radius: 999px; border:1px solid var(--border); background: #20232a; color: var(--muted); }
    .tag { font-size: 11px; padding: 6px 10px; border-radius: 999px; border:1px solid var(--border); background: #20232a; color: var(--text); opacity:.9 }
    .row { display:flex; flex-wrap:wrap; gap:10px; align-items:center; }

    /* Plugin item */
    .plugin { display:grid; grid-template-columns: 72px 1fr auto; gap: 16px; align-items: center; padding: 14px; border-radius: 14px; border:1px solid var(--border); background: #232731; margin-bottom: 12px; }
    .plugin .icon { width: 72px; height: 72px; border-radius: 12px; display:grid; place-items:center; background: #1f222a; border:1px solid var(--border); }
    .plugin h3 { margin: 0 0 4px; font-size: 16px; letter-spacing:.2px; }
    .plugin p { margin: 0; color: var(--muted); font-size: 13px; }
    .plugin .cta { display:flex; gap:8px; align-items:center; }

    /* Buttons */
    .btn { padding: 10px 14px; border-radius: 12px; border:1px solid var(--border); background: #1e222a; color: var(--text); cursor: pointer; }
    .btn.primary { background: var(--brand); border-color: #2b7dd8; color:#fff; }
    .btn.ghost { background: transparent; }
    .btn:active { transform: translateY(1px); }

    /* Sidebar blocks */
    .block + .block { margin-top: 16px; }
    .small { font-size: 12px; color: var(--muted); }
    code.inline { background: #11161f; border:1px solid var(--border); padding:2px 6px; border-radius: 6px; }

    /* Modal */
    .modal { position: fixed; inset: 0; display:none; align-items:center; justify-content:center; backdrop-filter: blur(3px); }
    .modal.open { display:flex; }
    .modal .sheet { width: min(740px, 92vw); background: var(--panel); border:1px solid var(--border); border-radius: 18px; box-shadow: var(--shadow); overflow:hidden; }
    .sheet .hd { padding: 14px 16px; border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; }
    .sheet .bd { padding: 16px; max-height: 70vh; overflow:auto; }

    /* Footer */
    footer { margin-top: 28px; color: var(--muted); font-size: 12px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div class="logo">S</div>
      <div class="title">
        <h1>STATS Plugins</h1>
        <span>Verified extensions to power up Short Term Asset Tracking System</span>
      </div>
    </div>

    <div class="util">
      <div class="search">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="1.5"/></svg>
        <input id="q" placeholder="Search plugins by name, tag, or author…" />
      </div>
      <button class="pill active" data-filter="all">All</button>
      <button class="pill" data-filter="import">Import</button>
      <!-- <button class="pill" data-filter="reports">Reports</button>
      <button class="pill" data-filter="integrations">Integrations</button> -->
      <button class="pill" data-filter="admin">Admin</button>
    </div>

    <div class="grid">
      <section class="col-8">
        <div class="card">
          <div class="hd">
            <div class="row">
              <span class="badge" id="count">0 plugins</span>
              <span class="badge">Catalog v1</span>
            </div>
            <div class="row">
              <span class="small">Sorted by relevance</span>
            </div>
          </div>
          <div class="bd" id="list">
            <!-- Injected plugin items -->
          </div>
        </div>
      </section>

      <aside class="col-4">
        <div class="card block">
          <div class="hd"><strong>Install Guide</strong></div>
          <div class="bd small">
            <ol>
              <li>Download the plugin <code class="inline">.zip</code> file.</li>
              <li>Extract into your server's <code class="inline">/plugins/</code> folder.</li>
              <li>Sign in to <strong>STATS → Admin → Plugins</strong> and click <strong>Scan</strong>.</li>
              <li>Enable the plugin and review permissions.</li>
            </ol>
            <p>For air‑gapped servers, verify the checksum before copying the files.</p>
          </div>
        </div>

        <div class="card block">
          <div class="hd"><strong>Compatibility</strong></div>
          <div class="bd small" id="compat">
            Tested with STATS <strong>v2.4 – v2.9</strong>. Newer core versions may require updated plugins.
          </div>
        </div>

        <div class="card block">
          <div class="hd"><strong>Need a custom plugin?</strong></div>
          <div class="bd small">
            Contact your STATS admin team to scope features. Typical requests include bulk imports, report pipelines, dashboard tiles, and external system webhooks.
          </div>
        </div>
      </aside>
    </div>

    <footer>
      © <span id="year"></span> STATS. Checksums listed for integrity; verify after download.
    </footer>
  </div>

  <!-- Release notes modal -->
  <div class="modal" id="notesModal" aria-hidden="true" role="dialog">
    <div class="sheet">
      <div class="hd">
        <strong id="notesTitle">Release Notes</strong>
        <button class="btn" id="closeNotes" aria-label="Close">Close</button>
      </div>
      <div class="bd small" id="notesBody"></div>
    </div>
  </div>

  <script>
    // --- Catalog (edit here to add/update plugins) ---
    const CATALOG = [
{
  id: 'csv-device-import',
  name: 'CSV Device Import',
  summary: 'Batch-import devices with column mapping, preview, template download, and status validation.',
  tags: ['import', 'devices', 'admin', 'mapping', 'template'],
  version: '1.4.0',
  minCore: '2.4',
  author: 'STATS Team',
  updated: '2025-08-12',
  size: '92 KB',
  checksum: 'sha256: 0',
  download: '#download/csv-device-import-1.4.0.zip',
  docs: '#docs/csv-device-import',
  notes: [
    'Makes Importing Devices Easier.',
    'Validates status against: available, assigned, out_of_service, LTL, LTL_POOL, LTL_check, decomissioned.',
    'Adds sample mapping presets for Chromebook, Windows Laptop, and iPad CSVs.',
    'Trims UTF-8 BOM on first column to fix Serial/header issues from Excel exports.',
    'Supports INSERT with ON DUPLICATE KEY UPDATE for safe re-imports.',
    'Provides downloadable CSV template with headers in correct order.'
  ],
  icon: svgBox(),
},
{
  id: 'equipment-tracker',
  name: 'Equipment Tracker',
  summary: 'Manage and track equipment loans to students and staff without accounts, with quick scan borrowing and returns.',
  tags: ['equipment', 'loans', 'staff', 'students'],
  version: '1.0.0',
  minCore: '2.4',
  author: 'STATS Team',
  updated: '2025-08-12',
  size: '92 KB',
  checksum: 'sha256: 0',
  download: '#download/equipment-tracker-1.0.0.zip',
  docs: '#docs/equipment-tracker',
  notes: [
    'All in one Drag and drop equipment tracker',
    'Takes Student ID input and / or Names to assign to Equipment assets.',
    'Borrow and Return tabs with real-time available equipment list.',
    'Settings tab for adding new equipment and editing details.'
  ],
  icon: svgBox(),
},
{
  id: 'settings-importer',
  name: 'Settings Importer',
  summary: 'Import configuration and settings from external JSON or CSV files directly into STATS.',
  tags: ['import', 'settings', 'config'],
  version: '1.1.0',
  minCore: '2.4',
  author: 'STATS Team',
  updated: '2025-08-12',
  size: '56 KB',
  checksum: '0',
  download: '#download/settings-importer-1.1.0.zip',
  docs: '#docs/settings-importer',
  notes: [
    'Takes CSV imports with mapping for bulk inport of student data.'
  ],
  icon: svgBox(),
},


      {
        id: 'Config',
        name: 'Configurator Page',
        summary: 'The one stop shop for configurating the backend of STATS',
        tags: ['reports', 'pdf'],
        version: '2.1.0',
        minCore: '2.5',
        author: 'STATS Team',
        updated: '2025-08-10',
        size: '112 KB',
        checksum: '0',
        download: '#download/pdf-report-generator-2.1.0.zip',
        docs: '#docs/overdue-reports',
        notes: [
          'Gives a UI for all backend services such as adding and removing users, Adding and editing Devices, Changing and removing Automatic Report Emails.'
        ],
        icon: svgDoc(),
      },
      // {
      //   id: 'services-dashboard',
      //   name: 'Node Services Dashboard',
      //   summary: 'Monitor Node.js services with start/stop hooks and live activity feed.',
      //   tags: ['integrations', 'admin'],
      //   version: '0.9.4',
      //   minCore: '2.6',
      //   author: 'STATS Labs',
      //   updated: '2025-07-29',
      //   size: '96 KB',
      //   checksum: 'sha256: 12b1f9c7…0aa2',
      //   download: '#download/services-dashboard-0.9.4.zip',
      //   docs: '#docs/services-dashboard',
      //   notes: [
      //     'Adds JSON log tailing with backpressure.',
      //     'UI polish and service health color states.'
      //   ],
      //   icon: svgTerminal(),
      // },
      // {
      //   id: 'rtsp-helper',
      //   name: 'RTSP Camera Helper',
      //   summary: 'Wizard to construct RTSP URLs for Dahua and ONVIF‑compatible cameras.',
      //   tags: ['integrations'],
      //   version: '1.0.1',
      //   minCore: '2.4',
      //   author: 'STATS Labs',
      //   updated: '2025-06-30',
      //   size: '41 KB',
      //   checksum: 'sha256: a8c2d1bb…55f1',
      //   download: '#download/rtsp-helper-1.0.1.zip',
      //   docs: '#docs/rtsp-helper',
      //   notes: [
      //     'Adds presets for NVR channels and sub‑streams.',
      //     'Improved copy‑to‑clipboard for URLs.'
      //   ],
      //   icon: svgCam(),
      // },
    ];

    // --- Render ---
    const listEl = document.getElementById('list');
    const countEl = document.getElementById('count');
    const qEl = document.getElementById('q');
    const filterPills = Array.from(document.querySelectorAll('.pill'));

    function render(items){
      listEl.innerHTML = '';
      items.forEach(p => listEl.appendChild(pluginRow(p)));
      countEl.textContent = `${items.length} plugin${items.length!==1?'s':''}`;
    }

    function pluginRow(p){
      const el = document.createElement('div');
      el.className = 'plugin';
      el.innerHTML = `
        <div class="icon">${p.icon}</div>
        <div>
          <h3>${p.name}</h3>
          <p>${p.summary}</p>
          <div class="row" style="margin-top:8px">
            <span class="tag">v${p.version}</span>
            <span class="tag">Core ≥ ${p.minCore}</span>
            <span class="tag">Updated ${p.updated}</span>
            <span class="tag">${p.size}</span>
            <span class="small" title="Checksum">${p.checksum}</span>
          </div>
        </div>
        <div class="cta">
          <a class="btn primary" href="${p.download}">Download</a>
          <a class="btn" href="${p.docs}">Docs</a>
          <button class="btn ghost" data-notes="${p.id}">Read More</button>
        </div>
      `;
      // bind notes button
      el.querySelector('[data-notes]')?.addEventListener('click', () => openNotes(p));
      return el;
    }

    function openNotes(p){
      const m = document.getElementById('notesModal');
      document.getElementById('notesTitle').textContent = `${p.name} • v${p.version}`;
      document.getElementById('notesBody').innerHTML = `<ul>${p.notes.map(n=>`<li style="margin:6px 0">${escapeHtml(n)}</li>`).join('')}</ul>`;
      m.classList.add('open');
      m.setAttribute('aria-hidden', 'false');
    }

    document.getElementById('closeNotes').addEventListener('click', () => {
      const m = document.getElementById('notesModal');
      m.classList.remove('open');
      m.setAttribute('aria-hidden', 'true');
    });

    // Search + filter
    let activeFilter = 'all';
    qEl.addEventListener('input', applyFilter);
    filterPills.forEach(p => p.addEventListener('click', () => {
      filterPills.forEach(x => x.classList.remove('active'));
      p.classList.add('active');
      activeFilter = p.dataset.filter;
      applyFilter();
    }));

    function applyFilter(){
      const q = qEl.value.trim().toLowerCase();
      const out = CATALOG.filter(p => {
        const inFilter = activeFilter==='all' || p.tags.includes(activeFilter);
        if(!inFilter) return false;
        if(!q) return true;
        return (
          p.name.toLowerCase().includes(q) ||
          p.summary.toLowerCase().includes(q) ||
          p.author.toLowerCase().includes(q) ||
          p.tags.join(' ').toLowerCase().includes(q)
        );
      });
      render(out);
    }

    // Utils
    function escapeHtml(str){
      return str.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#039;'}[m]));
    }

    // Icon SVGs
    function svgBox(){
      return `<svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="4" width="18" height="14" rx="2" ry="2" stroke="currentColor" stroke-width="1.4"/><path d="M7 8h10M7 12h6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg>`;
    }
    function svgDoc(){
      return `<svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 3h7l5 5v11a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z" stroke="currentColor" stroke-width="1.4"/><path d="M14 3v5h5" stroke="currentColor" stroke-width="1.4"/></svg>`;
    }
    function svgTerminal(){
      return `<svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="4" width="18" height="14" rx="2" ry="2" stroke="currentColor" stroke-width="1.4"/><path d="M7 9l3 3-3 3" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 15h5" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg>`;
    }
    function svgCam(){
      return `<svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="6" width="14" height="12" rx="2" ry="2" stroke="currentColor" stroke-width="1.4"/><circle cx="10" cy="12" r="3" stroke="currentColor" stroke-width="1.4"/><path d="M17 10l4-2v8l-4-2V10z" stroke="currentColor" stroke-width="1.4" stroke-linejoin="round"/></svg>`;
    }

    // Init
    document.getElementById('year').textContent = new Date().getFullYear();
    render(CATALOG);
  </script>
</body>
</html>
